# Explicitly listen on localhost. This is required since config fragments in
# `/etc/dnsmasq.d` may add additional `listen-address` values and the man page
# says:
#   Note that if no --interface option is given, but --listen-address is,
#   dnsmasq will not automatically listen on the loopback interface. To achieve
#   this, its IP address, 127.0.0.1, must be explicitly given as
#   a --listen-address option.
listen-address=127.0.0.1,::1

# Never forward plain names (without a dot or domain part)
domain-needed

# Never forward addresses in the non-routed address spaces.
bogus-priv

# Never read /etc/resolv.conf or any other file
no-resolv

server=8.8.8.8
server=1.1.1.1

# Listen on the WireGuard address
listen-address={{ wireguard_dnsmasq_ip }}

# Custom domain
address=/{{ wireguard_dnsmasq_domain }}/{{ wireguard_ip_gateway }}
